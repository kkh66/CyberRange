{% extends 'base.html' %}
{% load static %}
{% block title %}
    Add New Scenario
{% endblock %}

{% block styles %}
    <style>
        :root {
            --primary: #1a237e;
            --secondary: #d84315;
            --background: #0a0f2d;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --color1: #1a237e;
            --color2: #311b92;
        }

        .background_group {
            min-height: calc(100vh - 56px);
            padding: 2rem;
            background: linear-gradient(45deg, var(--color1), var(--color2));
            animation: gradientShift 12s infinite;
            position: relative;
            margin: -1.5rem -1.5rem 0;
        }

        .scenario_card {
            background: #2d2d2d;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 20px;
            border: 1px solid #404040;
            width: 100%;
        }

        .scenario_card .card-header {
            color: white;
            border: none;
            background: transparent;
        }

        .scenario_card .card-body {
            input, textarea {
                color: white !important;
                background: var(--glass-bg);
                border-radius: 1rem;
                padding: 1rem;
                box-shadow: 0 0 1rem rgba(0, 0, 0, 0.5);
                transition: transform 0.3s ease;
            }

            input:hover, textarea:hover {
                transform: translateY(-2px);
            }

            input:focus, textarea:focus {
                outline: none;
                background: rgba(255, 255, 255, 0.15);
                border-color: var(--secondary);
                box-shadow: 0 0 0 0.25rem rgba(216, 67, 21, 0.25);
            }

            label {
                color: white;
            }

            .form-text {
                color: white;
            }
        }

        .tips_card {
            background: #2d2d2d;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 20px;
            border: 1px solid #404040;
            width: 100%;
        }

        .tips_card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            border: 1px solid #505050;
        }

        .tips_container {
            padding: 10px 0;
        }

        .tip_item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            background: #363636;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(-20px);
            animation: slideIn 0.5s ease forwards;
            color: #e0e0e0;
            border: 1px solid #404040;
        }

        .tip_item:hover {
            background: #404040;
            transform: translateX(5px);
            border-color: #505050;
        }

        .tip_item i {
            transition: transform 0.3s ease;
        }

        .tip_item:hover i {
            transform: scale(1.2);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .tip_item:nth-child(1) {
            animation-delay: 0.1s;
        }

        .tip_item:nth-child(2) {
            animation-delay: 0.2s;
        }

        .tip_item:nth-child(3) {
            animation-delay: 0.3s;
        }

        .text-warning {
            color: #ffd700 !important;
        }

        .text-success {
            color: #4caf50 !important;
        }

        h5 {
            color: #ffffff;
            font-weight: 600;
        }

        .fas.fa-lightbulb {
            animation: glow 2s infinite;
        }

        /* Neon effect for hover */
        .tip_item:hover {
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.2);
        }

        /* Gradient border effect */
        .tips_card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            z-index: -1;
            border-radius: 16px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tips_card:hover::before {
            opacity: 0.3;
        }
    </style>
{% endblock %}


{% block content %}
    {% if user.is_staff %}
        <div class="background_group">
            <div class="d-flex justify-content-center align-items-center flex-column">
                <div class="card scenario_card w-50">
                    <div class="card-header ms-2">
                        <h3 class="d-flex align-items-center m-0">
                            <i class="fas fa-plus-circle me-3"></i>
                            Add New Scenario
                        </h3>
                        <p class="mb-0 mt-3 opacity-75">
                            <i class="fas fa-layer-group me-2"></i>
                            Creating scenario for "{{ group.name }}"
                        </p>
                    </div>
                    <div class="card-body">
                        <form method="post" action="{% url 'scenario:create_scenario' group.id %}">
                            {% csrf_token %}
                            <div class="form-floating mb-4 position-relative">
                                <input type="text"
                                       class="form-control ps-5"
                                       id="scenarioName"
                                       name="name"
                                       placeholder="Enter scenario name"
                                       required>
                                <label for="scenarioName" class="ps-5">Scenario Name</label>
                                <i class="fas fa-bookmark position-absolute top-50 start-0 translate-middle-y ms-3 text-white"></i>
                            </div>
                            <div class="form-floating mb-4 position-relative">
                            <textarea class="form-control ps-5"
                                      id="scenarioDescription"
                                      name="description"
                                      style="height: 120px"
                                      placeholder="Describe the scenario"
                                      required></textarea>
                                <label for="scenarioDescription" class="ps-5">Description</label>
                                <i class="fas fa-align-left position-absolute top-0 start-0 ms-3 mt-3 text-white"></i>
                            </div>
                            <div class="mb-4">
                                <div class="form-floating position-relative">
                                    <input id="dockerImage"
                                           type="text"
                                           class="form-control ps-5"
                                           name="docker_image"
                                           placeholder="Enter docker image"
                                           required>
                                    <label for="dockerImage" class="ps-5">Docker Image</label>
                                    <i class="fab fa-docker position-absolute top-50 start-0 translate-middle-y ms-3 text-white"></i>
                                </div>
                                <div class="form-text mt-2">
                                    <i class="fas fa-info-circle me-1 text-primary"></i>
                                    Example: ubuntu:latest, nginx:alpine
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="form-floating position-relative">
                                    <input id="timeLimit"
                                           type="number"
                                           class="form-control ps-5"
                                           name="time_limit"
                                           min="1"
                                           max="480"
                                           value="60"
                                           placeholder="Enter time limit"
                                           required>
                                    <label for="timeLimit" class="ps-5">Time Limit (minutes)</label>
                                    <i class="fas fa-clock position-absolute top-50 start-0 translate-middle-y ms-3 text-white"></i>
                                </div>
                                <div class="form-text mt-2">
                                    <i class="fas fa-info-circle me-1 text-primary"></i>
                                    Set a time limit between 1 and 480 minutes (8 hours). Default is 60 minutes.
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mt-4">
                                <a href="{% url 'group:group_detail' group.id %}"
                                   class="btn btn-outline-secondary px-4 py-2">
                                    <i class="fas fa-arrow-left me-2"></i>Back
                                </a>
                                <button type="submit" class="btn btn-primary px-4 py-2">
                                    <i class="fas fa-save me-2"></i>Create Scenario
                                </button>
                            </div>


                        </form>
                    </div>
                </div>
                <div class="tips_card p-4 w-50">
                    <h5 class="d-flex align-items-center mb-3">
                        <i class="fas fa-lightbulb text-warning me-2"></i>
                        Creation Tips
                    </h5>
                    <div class="tips_container">
                        <div class="tip_item">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            Keep scenario names clear and concise
                        </div>
                        <div class="tip_item">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            Include detailed learning objectives in description
                        </div>
                        <div class="tip_item">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            Use tested and verified Docker images
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block Script %}
{% endblock %}
